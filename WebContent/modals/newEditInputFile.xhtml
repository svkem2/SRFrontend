<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">                  
    <h:form id="inputFilemodalForm" class="editEntityModal">
        <p:dialog class="small-11 columns " header="Input File Entry" widgetVar="createEditInputFileModal" modal="true" showEffect="fade" hideEffect="fade" resizable="false">

            <div class="row">
                <div class="small-12 columns">
                    <h5 class="greenFont"><strong>Input File Details</strong></h5>
                </div>
                <div class="small-12 medium-6 columns">
                    <h:outputLabel for="fileNameFormat" value="File Name Format:" />
                    <p:inputText id="fileNameFormat" label="File Name Format" value="#{inputFileAdminBean.selectedInputFile.nameFormat}">
                    </p:inputText>
                    <p:message id="fileNameFormatMsg" for="fileNameFormat" style="color: red;" />

                    <h:outputLabel for="txnDateModifier" value="Txn Date Modifier:" />
                    <p:inputText id="txnDateModifier" label="Txn Date Modifier" value="#{inputFileAdminBean.selectedInputFile.txnDateModifier}">
                    </p:inputText>
                    <p:message id="txnDateModifierMsg" for="txnDateModifier" style="color: red;" />

                    <h:outputLabel for="pendingCutOff" value="Pending Cut-off:" />
                    <p:inputText id="pendingCutOff" label="Pending Cut Off" value="#{inputFileAdminBean.selectedInputFile.pendingCutOff}">
                    </p:inputText>
                    <p:message id="pendingCutOffMsg" for="pendingCutOff" style="color: red;" />

                    <h:outputLabel for="country" value="Country:" />
                    <p:inputText id="country" label="Country" value="#{inputFileAdminBean.selectedInputFile.country}">
                    </p:inputText>
                    <p:message id="countryMsg" for="country" style="color: red;" />
                </div>
                <div class="small-12 medium-6 columns">
                    <h:outputLabel for="searchPattern" value="Search Pattern:" />
                    <p:inputText id="searchPattern" label="Search Pattern" value="#{inputFileAdminBean.selectedInputFile.fileSearchPattern}">
                    </p:inputText>
                    <p:message id="searchPatternMsg" for="searchPattern" style="color: red;" />

                    <h:outputLabel for="dateModifier" value="Date Modifier:" />
                    <p:inputText id="dateModifier" label="Date Modifier" value="#{inputFileAdminBean.selectedInputFile.dateModifier}">
                    </p:inputText>
                    <p:message id="dateModifierMsg" for="dateModifier" style="color: red;" />

                    <h:outputLabel for="sourceName" value="Source Name:" />
                    <p:inputText id="sourceName" label="Source Name" value="#{inputFileAdminBean.selectedInputFile.dataSourceName}">
                    </p:inputText>
                    <p:message id="sourceNameMsg" for="sourceName" style="color: red;" />

                    <h:outputLabel for="sourceType" value="Source Type:" />
                    <p:inputText id="sourceType" label="Source Type" value="#{inputFileAdminBean.selectedInputFile.dataSourceType}">
                    </p:inputText>
                    <p:message id="sourceTypeMsg" for="sourceType" style="color: red;" />
                </div>
            </div>


            <div class="row">
                <div class="small-12 columns">
                    <br/>
                    <h5 class="greenFont"><strong>Input File Dependencies</strong></h5>
                </div>
                <div class="small-12 medium-6 columns">
                    <h:outputLabel for="filePath" value="File Paths:"  />
                    <p:selectOneMenu id="filePath" value="#{inputFileAdminBean.selectedFilePath}" label="File Path"
                                     effect="fade" var="fp" converter="filePathConverter">
                        <f:selectItems value="#{inputFileAdminBean.allFilePaths}" var="filePaths" itemLabel="#{filePaths.filePath}" itemValue="#{filePaths}" />
                        <f:selectItem itemValue="#{null}" itemLabel="Please select one" noSelectionOption="true" />
                        <p:column>
                            <h:outputText value="#{fp.filePathId}" />
                        </p:column>

                        <p:column>
                            <h:outputText value="#{fp.filePath}" />
                        </p:column>
                    </p:selectOneMenu> 
                    <p:message id="filePathMsg" for="filePath" style="color: red;" />
                    <p:commandButton value="New File Path"
                                     update=":inputFilemodalForm"
                                     onclick="PF('createEditInputFileModal').hide();"
                                     oncomplete="PF('createEditFilePathModal').show();"/>
                    
                    <h:outputLabel for="concatFileGroup" value="Concat. File Groups:"  />
                    <p:selectOneMenu id="concatFileGroup" value="#{inputFileAdminBean.selectedConcatFileGroup}" label="Concatnate File Group"
                                     effect="fade" var="cfg" converter="concatenateFileGroupConverter">
                        <f:selectItems value="#{inputFileAdminBean.allConcatenateFileGroups}" var="concateFileGroups" itemLabel="#{concateFileGroups.description}" itemValue="#{concateFileGroups}" />
                        <f:selectItem itemValue="#{null}" itemLabel="Please select one" noSelectionOption="true" />
                        <p:column>
                            <h:outputText value="#{cfg.concatenateFileGroupId}" />
                        </p:column>

                        <p:column>
                            <h:outputText value="#{cfg.description}" />
                        </p:column>
                    </p:selectOneMenu>
                    <p:message id="concatFileGroupMsg" for="concatFileGroup" style="color: red;" />
                    <p:commandButton value="New Con. File Grp"
                                     onclick="PF('createEditInputFileModal').hide();"
                                     update=":concatFileGrpModalForm" 
                                     oncomplete="PF('createEditConcatFileGrpModal').show();"/>
                </div>


                <div class="small-12 medium-6 columns">
                    <h:outputLabel for="fileSchema" value="File Schemas:"  />
                    <p:selectOneMenu id="fileSchema" value="#{inputFileAdminBean.selectedFileSchema}" label="File Schema"
                                     effect="fade" var="fs" converter="inputFileSchemaConverter">
                        <f:selectItems value="#{inputFileAdminBean.allInputFileSchemas}" var="fileSchemas" itemLabel="#{fileSchemas.description}" itemValue="#{fileSchemas}" />
                        <f:selectItem itemValue="#{null}" itemLabel="Please select one" noSelectionOption="true" />
                        <p:column>
                            <h:outputText value="#{fs.inputFileSchemaId}" />
                        </p:column>

                        <p:column>
                            <h:outputText value="#{fs.description}" />
                        </p:column>
                    </p:selectOneMenu>
                    <p:message id="fileSchemaMsg" for="fileSchema" style="color: red;" />
                    <p:commandButton value="New File Schema"
                                     onclick="PF('createEditInputFileModal').hide();"
                                     update=":fileSchemaModalForm" 
                                     oncomplete="PF('createEditInputFileSchemaModal').show();"/>
                </div>
            </div>
            <div class="row .dataTableHeader">
                <div class="small-12 columns tableHeaderFacet ">
                    <div class="button-group tableHeaderFacet float-right">
                        <p:commandButton value="Save Entry" class="button tableHeaderFacet" ajax="true" actionListener="#{inputFileAdminBean.saveEntryAction(actionEvent)}">
                        </p:commandButton>
                        <p:commandButton value="Cancel" class="button tableHeaderFacet" ajax="false" onclick="inputFilemodalForm.hide()" immediate="true">
                        </p:commandButton>
                    </div>
                </div>
            </div>
        </p:dialog>
    </h:form>
    <ui:include src="/modals/createEditInputFileSchemaModal.xhtml"/>
    <ui:include src="/modals/createEditConcatFileGrp.xhtml"/>
    <ui:include src="/modals/newEditFilePath.xhtml"/>
</html>